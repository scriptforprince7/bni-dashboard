
 
      <!-- Add this right after <body> tag -->
        <script src="/assets/js/tokenUtils.js"></script>
        <script>
            (function checkAccess() {
                try {
                    const loginType = getUserLoginType();
                    if (loginType !== 'ro_admin') {
                        document.body.innerHTML = `
                            <div style="display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f8f9fa;">
                                <div style="text-align: center; padding: 20px; background-color: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <h2 style="color: #dc3545; margin-bottom: 10px;">Unauthorized Access</h2>
                                    <p style="color: #6c757d;">Only RO Admin can access this page.</p>
                                    <a href="/" style="display: inline-block; margin-top: 15px; padding: 8px 16px; background-color: #0d6efd; color: white; text-decoration: none; border-radius: 4px;">Go to Home</a>
                                </div>
                            </div>
                        `;
                    }
                } catch (error) {
                    console.error('Access check failed:', error);
                    window.location.href = '/';
                }
            })();
        </script>
<!-- header -->
<%- include('../partials/header') %> 
<!-- end header -->

<!-- sidebar -->

<%- include('../partials/sidebar') %>

<!-- end sidebar -->

<style>
  
  /* Ensuring that the modal body has padding */
  .modal-body {
    padding: 20px;
  }
  /* Preventing the add button container from affecting layout */
  .add-button-container {
    margin-top: 10px; /* Space above the button */
    display: none; /* Initially hidden */
  }
</style>
<meta content="keyword">
<style>
  /* Custom styling for checkboxes */
  input[type="checkbox"] {
    appearance: none;
    width: 17px;
    height: 18px;
    border: 2px solid #888;
    border-radius: 4px;
    outline: none;
    cursor: not-allowed; /* Cursor will indicate non-editable */
    display: inline-block;
    position: relative;
  }

  /* Styling for the checkbox when checked */
  input[type="checkbox"]:checked {
    background-color: green; /* Green background for checked state */
    border-color: green; /* Border will also be green */
  }

  /* Add a checkmark when the checkbox is checked */
  input[type="checkbox"]:checked::after {
    content: 'âœ“';
    color: white;
    font-size: 16px;
    position: absolute;
    top: -2px;
    left: 2px;
  }
</style>

      <!-- Start::app-content -->
      <div class="main-content app-content" style="background-color: #f4f4f4">
        <div class="container-fluid">
          <!-- Start::page-header -->
          <div
            class="d-flex align-items-center justify-content-between page-header-breadcrumb flex-wrap gap-2"
          >
            <div>
              <h1 class="page-title fw-medium fs-18 mb-0">
                <span style="font-weight: 700; font-family: Poppins"
                  >Add New Chapter</span
                >
              </h1>
              <!-- <p>Manage kitty payments with just one click</p> -->
            </div>
            <!-- <div class="d-flex align-items-center gap-2 flex-wrap">
              <div class="form-group">
                <div class="input-group">
                  <div class="input-group-text bg-white border">
                    <i class="ri-calendar-line"></i>
                  </div>
                  <input
                    type="text"
                    class="form-control breadcrumb-input"
                    id="daterange"
                    placeholder="Search By Date Range"
                  />
                </div>
              </div>
              <div class="btn-list">
                <button class="btn btn-white btn-wave">
                  <i class="ri-filter-3-line align-middle me-1 lh-1"></i> Filter
                </button>
                <button class="btn btn-primary btn-wave me-0">
                  <i class="ri-share-forward-line me-1"></i> Share
                </button>
              </div>
            </div> -->
          </div>
          <!-- End::page-header -->
          <style>
            @import url("https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap");

            @import url("https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap");
          </style>

          <style>
            * {
              font-family: Montserrat !important;
              font-weight: 800px;
            }
            .text-muted {
              color: black !important;
              font-family: Montserrat Alternates;
            }
            .popins {
              font-family: Poppins;
            }
          </style>
          <form id="addChapterForm">
          <div class="row">
            <div class="col-xl-12">
              <div class="card custom-card">
                <div class="card-body add-products">
                  <div class="row gx-4">
                    <div class="col-xxl-12 col-xl-12 col-lg-12 col-md-6">
                      <div class="card custom-card shadow-none mb-0 border-0">
                        <div class="card-body p-0">
                          <div class="row gy-3">
                            <div class="col-xl-12">
                              <label for="product-cost-add" class="form-label"
                                ><span style="font-size: 15px"
                                  ><b>It's time for a new chapter!</b></span
                                ></label
                              >
                            </div>
                            <div class="col-xl-6">
                              <label for="chapter_name" class="form-label">Enter Chapter Name</label>
                              <input
                                  type="text"
                                  class="form-control"
                                  id="chapter_name"
                                  name="chapter_name"
                                  
                                  placeholder="New chapter name.."
                              />
                              <label for="chapter_name" class="form-label mt-1 fs-12 fw-normal text-muted mb-0">
                                  <span style="color: red">*Mention the acknowledged name of the chapter</span>
                              </label>
                          </div>
                            <div class="col-xl-6">
                              <label for="region_id" class="form-label">Choose Region <a href="/r/add-region">
                                <button type="button" class="btn btn-outline-info btn-sm">Add Region +</button>
                              </a></label>
                              <select class="form-control" name="region_id" id="region_id">
                                <option value="">Select</option>
                              </select>
                            </div>
                            
                            <div class="col-xl-6" id="accolades-container" style="display: none; background-color: 		#F0F0F0; padding: 10px; border-radius: 8px;">
                              <label for="accolades-list" class="form-label">Accolades by Region</label>
                              <div id="accolades-list" style="display: flex; flex-direction: column;">
                                <!-- Accolades checkboxes will be dynamically populated here -->
                              </div>
                            </div>
                            <div class="col-xl-6">
                              <label for="chapter_meeting_day" class="form-label">Chapter Meeting Day</label>
                              <select class="form-control" id="chapter_meeting_day"
                              name="chapter_meeting_day"
                              >
                                <option value="">Select</option>
                              </select>
                            </div>
                            <div class="col-xl-6">
                              <label for="hotel_id" class="form-label">Choose Hotel & Venue
                                  <button type="button" class="btn btn-outline-info btn-sm" id="addHotelButton">Add Hotel +</button>
                              </label>
                              <select class="form-control" name="hotel_id" id="hotel_id">
                                  <option value="">Select</option>
                              </select>
                          </div>
                            <div class="col-xl-6">
                              <label for="chapter_type" class="form-label"
                                >Chapter Type</label
                              >
                              <select
                                class="form-control"
                                data-trigger=""
                                id="chapter_type"
                                name="chapter_type"
                                
                              >
                                <option value="">Select</option>
                              </select>
                            </div>
                            <div class="col-xl-6">
                              <label for="contact_person" class="form-label"
                                >Contact Person
                                
                              </label>
                              <input
                                type="text"
                                class="form-control"
                                id="contact_person"
                          name="contact_person"
                          
                                placeholder="Name of the contact person..."
                              />
                            </div>

                            <div class="col-xl-6">
                              <label for="contact_number" class="form-label"
                                >Contact Number</label
                              >
                              <div class="input-group">
                                <span class="input-group-text">
                                  <img
                                    src="https://upload.wikimedia.org/wikipedia/en/4/41/Flag_of_India.svg"
                                    alt="India"
                                    width="20"
                                    style="margin-right: 5px"
                                  />
                                  91+
                                </span>
                                <input
                                  type="tel"
                                  class="form-control"
                                  id="contact_number"
                          name="contact_number"
                          
                                  placeholder="Enter phone number"
                                />
                              </div>
                            </div>

                            
                            
                            <div class="col-xl-6">
                              <label for="email_id" class="form-label"
                                >Email ID
                                <span style="color: red">(If registered)</span>
                              </label>
                              <input
                                type="text"
                                class="form-control"
                                id="email_id"
                          name="email_id"
                          
                                placeholder="admin@bni.com"
                              />
                            </div>

                             <!-- Modals -->
                        <!-- One Year Tax Modal -->
                        <div
                        class="modal fade"
                        id="taxModal1"
                        tabindex="-1"
                        aria-labelledby="taxModalLabel"
                        aria-hidden="true"
                      >
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="taxModalLabel">
                                Select Tax Type
                              </h5>
                              <button
                                type="button"
                                class="btn-close"
                                data-bs-dismiss="modal"
                                aria-label="Close"
                              ></button>
                            </div>
                            <div class="modal-body">
                              <label for="taxType1">Tax Type:</label>
                              <select
                                class="form-control"
                                id="taxType1"
                                onchange="updateTaxOptions(1)"
                              >
                                <option value="" disabled selected>
                                  Select Tax Type
                                </option>
                                <option value="gst">GST</option>
                                <option value="vat">VAT</option>
                              </select>

                              <label for="taxOptions1" class="mt-2"
                                >Tax Percentage:</label
                              >
                              <select
                                class="form-control"
                                id="taxOptions1"
                                disabled
                              >
                                <option value="" selected>
                                  Select Percentage
                                </option>
                              </select>

                              <div
                                class="add-button-container"
                                id="addButtonContainer1"
                              >
                                <button
                                  class="btn btn-success"
                                  id="addButton1"
                                >
                                  Add
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- Two Year Tax Modal -->
                      <div
                        class="modal fade"
                        id="taxModal2"
                        tabindex="-1"
                        aria-labelledby="taxModalLabel"
                        aria-hidden="true"
                      >
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="taxModalLabel">
                                Select Tax Type for Two Year Membership
                              </h5>
                              <button
                                type="button"
                                class="btn-close"
                                data-bs-dismiss="modal"
                                aria-label="Close"
                              ></button>
                            </div>
                            <div class="modal-body">
                              <label for="taxType2">Tax Type:</label>
                              <select
                                class="form-control"
                                id="taxType2"
                                onchange="updateTaxOptions(2)"
                              >
                                <option value="" disabled selected>
                                  Select Tax Type
                                </option>
                                <option value="gst">GST</option>
                                <option value="vat">VAT</option>
                              </select>

                              <label for="taxOptions2" class="mt-2"
                                >Tax Percentage:</label
                              >
                              <select
                                class="form-control"
                                id="taxOptions2"
                                disabled
                              >
                                <option value="" selected>
                                  Select Percentage
                                </option>
                              </select>

                              <div
                                class="add-button-container"
                                id="addButtonContainer2"
                              >
                                <button
                                  class="btn btn-success"
                                  id="addButton2"
                                >
                                  Add
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- Five Year Tax Modal -->
                      <div
                        class="modal fade"
                        id="taxModal3"
                        tabindex="-1"
                        aria-labelledby="taxModalLabel"
                        aria-hidden="true"
                      >
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="taxModalLabel">
                                Select Tax Type for Five Year Membership
                              </h5>
                              <button
                                type="button"
                                class="btn-close"
                                data-bs-dismiss="modal"
                                aria-label="Close"
                              ></button>
                            </div>
                            <div class="modal-body">
                              <label for="taxType3">Tax Type:</label>
                              <select
                                class="form-control"
                                id="taxType3"
                                onchange="updateTaxOptions(3)"
                              >
                                <option value="" disabled selected>
                                  Select Tax Type
                                </option>
                                <option value="gst">GST</option>
                                <option value="vat">VAT</option>
                              </select>

                              <label for="taxOptions3" class="mt-2"
                                >Tax Percentage:</label
                              >
                              <select
                                class="form-control"
                                id="taxOptions3"
                                disabled
                              >
                                <option value="" selected>
                                  Select Percentage
                                </option>
                              </select>

                              <div
                                class="add-button-container"
                                id="addButtonContainer3"
                              >
                                <button
                                  class="btn btn-success"
                                  id="addButton3"
                                >
                                  Add
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                            


                            <div class="col-xl-6">
                              <label for="eoi_link" class="form-label">Chapter EOI Link</label>
                              <input
                                  type="text"
                                  class="form-control"
                                  id="eoi_link"
                                  name="eoi_link"
                                  
                                  placeholder="https://-.."
                                  
                              />
                          </div>
                            
<div class="col-xl-6">
  <label for="member_app_link" class="form-label">Member Application Link</label>
  <input type="text" class="form-control" id="member_app_link"
  name="member_app_link"
   placeholder="https://-.."  />
</div>



<div class="col-xl-6">
  <label for="chapter_mission" class="form-label"
    >Chapter Mission</label
  >
  <textarea
    class="form-control"
    id="chapter_mission"
                          name="chapter_mission"
                          
    placeholder="Enter the chapter's mission"
    rows="3"
  ></textarea>
</div>

<div class="col-xl-6">
  <label for="chapter_vision" class="form-label"
    >Chapter Vision</label
  >
  <textarea
    class="form-control"
    id="chapter_vision"
                          name="chapter_vision"
                          
    placeholder="Enter the chapter's vision"
    rows="3"
  ></textarea>
</div>
<div class="col-xl-6">
  <label for="billing_frequency" class="form-label">Kitty Billing Frequency <a href="/r/add-region">
  </a></label>
  <select class="form-control" name="billing_frequency" id="billing_frequency">
    <option value="">Select</option>
    <option value="weekly">Weekly</option>
    <option value="monthly">Monthly</option>
    <option value="quartely">Quartely</option>
    <option value="half_yearly">Half Yearly</option>
    <option value="yearly">Yearly</option>

  </select>
</div>

<div class="col-xl-4">
  <label for="chapter_kitty_fees" class="form-label"
    >Chapter Meeting/Kitty Fees <span style="color: red;" > (weekly)</span>  </label
  >
  <input
    type="text"
    class="form-control"
    id="chapter_kitty_fees"
    name="chapter_kitty_fees"
    
    placeholder="17,700/-.."
  />
</div>
<div class="col-xl-4">
  <label for="chapter_visitor_fees" class="form-label"
    >Chapter Visitor Fee</label
  >
  <input
    type="text"
    class="form-control"
    id="chapter_visitor_fees"
    name="chapter_visitor_fees"
    
    placeholder="1,200/-.."
  />
</div>

<div class="col-xl-4">
  <label for="chapter_available_fund" class="form-label"
    >Chapter Available Fund</label
  >
  <input
    type="text"
    class="form-control"
    id="chapter_available_fund"
    name="chapter_available_fund"
    
    placeholder="50,000/-.."
  />
</div>

<div class="col-xl-6">
  <label for="chapter_status" class="form-label"
    >Chapter Status</label
  >
  <select
    class="form-control"
    data-trigger=""
    id="chapter_status"
    name="chapter_status"
   
  >
    <option value="">Select</option>
  </select>
</div>

<div class="col-xl-6">
  <label for="chapter_logo" class="form-label">
    Chapter Logo <span style="color: red;">(jpg, png, jpeg)</span>
  </label>
  <input
    type="file"
    class="form-control"
    id="chapter_logo"
    name="chapter_logo"
    accept="image/jpeg,image/png,image/jpg"
    onchange="previewLogo(this)"
  />
  
  <!-- Add preview container -->
  <div id="logoPreviewContainer" class="mt-2" style="display: none;">
    <img id="logoPreview" src="" alt="Logo Preview" 
         style="max-width: 200px; max-height: 200px; object-fit: contain;"/>
    <button type="button" class="btn btn-danger btn-sm mt-2" 
            onclick="removeLogo()">
      <i class="bi bi-trash"></i> Remove Logo
    </button>
  </div>
</div>
                            
                            
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xl-12">
              <div class="card custom-card">
                <div class="card-body">
                  <div class="d-flex align-items-center mb-3">
                    <div class="form-check form-switch">
                      <input 
                        class="form-check-input" 
                        type="checkbox" 
                        role="switch" 
                        id="showEmergencyContact" 
                        style="width: 3em; height: 1.5em; margin-right: 10px;"
                      >
                      <label class="form-check-label" for="showEmergencyContact">
                        <span style="font-size: 15px; color: #d01f2f;">
                          <i class="bi bi-shield-fill-plus me-1"></i>
                          <b>Add Login Emails</b>
                        </span>
                      </label>
                    </div>
                  </div>
 
                  <!-- Emergency Contact Details Section (initially hidden) -->
                  <div id="chapterEmailSection" style="display: none;">
                    <div class="row gy-3">
                      <div class="col-xl-4">
                        <label for="president_email" class="form-label">
                          <i class="bi bi-people-fill me-1"></i>  President Chapter Email
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          id="president_email"
                          name="president_email"
                          placeholder="Enter Email"
                        />
                      </div>
 
                      <div class="col-xl-4">
                        <label for="vice_president_email" class="form-label">
                          <i class="bi bi-people-fill me-1"></i>  Vice President Chapter Email
                        </label>
                        <input
                          type="tel"
                          class="form-control"
                          id="vice_president_email"
                          name="vice_president_email"
                          placeholder="Enter Email"
                        />
                      </div>
 
                      <div class="col-xl-4">
                        <label for="treasurer_email" class="form-label">
                          <i class="bi bi-people-fill me-1"></i> Treasurer Chapter Email
                        </label>
                        <input
                          type="text"
                          class="form-control"
                          id="treasurer_email"
                          name="treasurer_email"
                          placeholder="Enter Email"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xl-12">
              <div class="card custom-card">
                <div class="card-body add-products">
                  <div class="row gx-4">
                    <div class="col-xxl-12 col-xl-12 col-lg-12 col-md-6">
                      <div class="card custom-card shadow-none mb-0 border-0">
                        <div class="card-body p-0">
                          <div class="row gy-3">
                            <div class="col-xl-12">
                              <label for="product-cost-add" class="form-label"
                                ><span style="font-size: 15px"
                                  ><b>Address & Hotel Details</b></span
                                ></label
                              >
                            </div>
      
                            <div class="col-xl-6">
                              <label for="country" class="form-label"
                                >Country</label
                              >
                              <select
                                class="form-control"
                                name="product-brand-add"
                                id="country"
                          name="country"
                          
                              >
                                <option value="">Select Country</option>
                              </select>
                            </div>
      
                            <div class="col-xl-6">
                              <label for="state" class="form-label"
                                >State/Province</label
                              >
                              <input
                                type="text"
                                class="form-control"
                                id="state"
                          name="state"
                          
                                placeholder="Enter state or province"
                              />
                            </div>
      
                            <div class="col-xl-6">
                              <label for="city" class="form-label">City</label>
                              <input
                                type="text"
                                class="form-control"
                                id="city"
                          name="city"
                          
                                placeholder="Enter city"
                              />
                            </div>
    
      
                            <div class="col-xl-6">
                              <label for="street_address_line" class="form-label"
                                >Street Address Line</label
                              >
                              <input
                                type="text"
                                class="form-control"
                                id="street_address_line"
                          name="street_address_line"
                          
                                placeholder="Enter street address"
                              />
                            </div>
      
                            <div class="col-xl-6">
                              <label for="postal_code" class="form-label"
                                >Postal Code</label
                              >
                              <input
                                type="text"
                                class="form-control"
                                id="postal_code"
                          name="postal_code"
                          
                                placeholder="Enter postal code"
                              />
                            </div>
                            <!-- <div class="col-12">
                              <button class="btn btn-danger btn-sm me-2 mb-2 mb-sm-0" id="chapter_location_note">
                                Add Note<i class="bi bi-plus-lg ms-2"></i>
                              </button>
                            </div> -->

                            <div id="locationNoteContainer" class="col-12 mt-3"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xl-12">
              <div class="card custom-card">
                <div class="card-body add-products">
                  <div class="row gx-4">
                    <div class="col-xxl-12 col-xl-12 col-lg-12 col-md-6">
                      <div class="card custom-card shadow-none mb-0 border-0">
                        <div class="card-body p-0">
                          <div class="row gy-3">
                            <div class="col-xl-12">
                              <label for="product-cost-add" class="form-label"
                                ><span style="font-size: 15px"
                                  ><b>Social Media & Handles</b></span
                                ></label
                              >
                            </div>
                            <div class="col-xl-6">
                              <label for="chapter_facebook-link" class="form-label">
                                <i class="bi bi-facebook"></i> Facebook
                              </label>
                              <input
                                type="text"
                                class="form-control"
                                id="chapter_facebook"
                          name="chapter_facebook"
                          
                                placeholder="www.facebook.com"
                              />
                            </div>
      
                            <div class="col-xl-6">
                              <label for="chapter_instagram-link" class="form-label">
                                <i class="bi bi-instagram"></i>
                                Instagram
                              </label>
                              <input
                                type="text"
                                class="form-control"
                                id="chapter_instagram"
                          name="chapter_instagram"
                          
                                placeholder="www.instagram.com"
                              />
                            </div>
      
                            <div class="col-xl-4">
                              <label for="chapter_linkedin-link" class="form-label">
                                <i class="bi bi-linkedin"></i>
                                Linkedin
                              </label>
                              <input
                                type="text"
                                class="form-control"
                                id="chapter_linkedin"
                          name="chapter_linkedin"
                          
                                placeholder="www.linkedin.com"
                              />
                            </div>
      
                            <div class="col-xl-4">
                              <label for="chapter_youtube" class="form-label">
                                <i class="bi bi-youtube"></i>
                                Youtube
                              </label>
                              <input
                                type="text"
                                class="form-control"
                                id="chapter_youtube"
                          name="chapter_youtube"
                          
                                placeholder="www.youtube.com"
                              />
                            </div>
      
                            <div class="col-xl-4">
                              <label for="chapter_website" class="form-label">
                                <i class="bi bi-https"></i>
                                Chapter Website (If any)
                              </label>
                              <input
                                type="text"
                                class="form-control"
                                id="chapter_website"
                          name="chapter_website"
                          
                                placeholder="www.yourwebsite.com"
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xl-12">
              <div class="card custom-card">
                <div class="card-body add-products">
                  <div class="row gx-4">
                    <div class="col-xxl-12 col-xl-12 col-lg-12 col-md-6">
                      <div class="card custom-card shadow-none mb-0 border-0">
                        <div class="card-body p-0">
                          <div class="row gy-3">
                            <div class="col-xl-12">
                              <label for="product-cost-add" class="form-label"
                                ><span style="font-size: 15px"
                                  ><b>Membership Fees Details <span style="color: #d01f2f;">(By Region)</span></b></span
                                ></label
                              >
                            </div>

                            <div class="col-xl-6">
                              <label for="one_time_registration_fee" class="form-label">One Time Registration Fees</label>
                              <input
                                type="text"
                                class="form-control"
                                id="one_time_registration_fee"
                                name="one_time_registration_fee"
                                
                                placeholder="5,000/-"
                                readonly
                                style="background-color: rgb(240, 240, 240);"
                              />
                            </div>
                            <div class="col-xl-6">
                              <label for="chapter_late_fees" class="form-label">Late Fees</label>
                              <input
                                type="text"
                                class="form-control"
                                id="chapter_late_fees"
                                name="chapter_late_fees"
                                
                                placeholder="Enter late fees"
                                readonly
                                style="background-color: rgb(240, 240, 240);"
                              />
                            </div>
                            <div class="col-xl-4">
                              <label for="chapter_membership_fee" class="form-label">One Year Membership Fees</label>
                              <input
                                type="text"
                                class="form-control"
                                id="chapter_membership_fee"
                                name="chapter_membership_fee"
                                
                                placeholder="59,900/-"
                                readonly
                                style="background-color: rgb(240, 240, 240);"
                              />
                            </div>
                            <div class="col-xl-4">
                              <label for="chapter_membership_fee_two_year" class="form-label">Two Year Membership Fees</label>
                              <input
                                type="text"
                                class="form-control"
                                id="chapter_membership_fee_two_year"
                                name="chapter_membership_fee_two_year"
                                
                                placeholder="69,000/-"
                                readonly
                                style="background-color: rgb(240, 240, 240);"
                              />
                            </div>
                            <div class="col-xl-4">
                              <label for="chapter_membership_fee_five_year" class="form-label">Five Year Membership Fees</label>
                              <input
                                type="text"
                                class="form-control"
                                id="chapter_membership_fee_five_year"
                                name="chapter_membership_fee_five_year"
                                
                                placeholder="1,03,500/-"
                                readonly
                                style="background-color: rgb(240, 240, 240);"
                              />
                            </div>

                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card-footer border-top border-block-start-dashed d-sm-flex justify-content-end align-items-center">
                  <div class="me-3">
                    <label for="date_of_publishing" class="form-label mb-0 me-2"><b>Date of Publishing</b>:</label>
                    <input type="date" class="form-control d-inline-block w-auto" id="date_of_publishing"
                    name="date_of_publishing"
                     />
                  </div>
                  <div class="me-3">
                    <label for="chapter_launched_by" class="form-label mb-0 me-2"><b>Chapter Launched by</b>:</label>
                    <input type="text" class="form-control d-inline-block w-auto" id="chapter_launched_by"
                    name="chapter_launched_by"
                    
                           placeholder="Chapter launched by.." />
                  </div>
                  
                  <button class="btn btn-success me-2 mb-2 mb-sm-0">
                    Add Chapter
                  </button>
                </div>
              </div>
            </div>
          </div>
        </form>
        <div id="formMessage"></div>
        </div>
      </div>
      <!-- End::content  -->

      <script>
        document.addEventListener("DOMContentLoaded", function() {
  const regionsApiUrl = 'http://localhost:5000/api/regions';
  const accoladesApiUrl = 'http://localhost:5000/api/accolades';
  const chapterNameInput = document.getElementById('chapter_name');
  const regionSelect = document.getElementById('region_id');
  const eoiLinkInput = document.getElementById('eoi_link');
  const memberAppLinkInput = document.getElementById('member_app_link');
  const chapterMeetingDaySelect = document.getElementById('chapter_meeting_day');
  const chapterStatusSelect = document.getElementById('chapter_status');
  const chapterTypeSelect = document.getElementById('chapter_type');  // Add chapter type dropdown
  const oneTimeRegistrationFeeInput = document.getElementById('one_time_registration_fee');
  const chapterLateFeesInput = document.getElementById('chapter_late_fees');
  const chapterMembershipFeeInput = document.getElementById('chapter_membership_fee');
  const chapterMembershipFeeTwoYearInput = document.getElementById('chapter_membership_fee_two_year');
  const chapterMembershipFeeFiveYearInput = document.getElementById('chapter_membership_fee_five_year');
  let accoladesMap = {};  // Mapping accolade_id to accolade_name
  let regionsData = [];   // Store fetched regions data

  // Fetch accolade data and build a mapping of accolade_id to accolade_name
  fetch(accoladesApiUrl)
    .then(response => response.json())
    .then(accoladesData => {
      accoladesData.forEach(accolade => {
        accoladesMap[accolade.accolade_id] = accolade.accolade_name;
      });
    })
    .catch(error => {
      console.error('Error fetching accolades:', error);
    });

  // Fetch regions data
  fetch(regionsApiUrl)
    .then(response => response.json())
    .then(data => {
      regionsData = data; // Store the data for later use
      regionSelect.innerHTML = '<option value="">Select</option>';
      
      // Loop through each region and create an <option> for it
      data.forEach(region => {
        const option = document.createElement('option');
        option.value = region.region_id;
        option.textContent = region.region_name;
        option.dataset.accolades = JSON.stringify(region.accolades_config);
        option.dataset.daysOfChapter = JSON.stringify(region.days_of_chapter); // Store days_of_chapter in dataset
        option.dataset.chapterStatus = region.chapter_status;  // Store chapter_status in dataset
        option.dataset.chapterType = JSON.stringify(region.chapter_type);      // Store chapter_type in dataset
        regionSelect.appendChild(option);
      });
    })
    .catch(error => {
      console.error('Error fetching regions:', error);
    });

  // Function to generate EOI link
  function generateEoiLink() {
    const chapterName = chapterNameInput.value.trim();
    const selectedRegion = regionSelect.options[regionSelect.selectedIndex];

    if (selectedRegion) {
      const regionName = selectedRegion.textContent;
      const firstLetterOfRegion = regionName.charAt(0).toLowerCase(); // Get the first letter of the region name
      const formattedChapterName = chapterName.replace(/\s+/g, '-'); // Replace spaces with dashes
      eoiLinkInput.value = `https://www.bniindia.li/${formattedChapterName}-del-${firstLetterOfRegion}`;
    } else {
      eoiLinkInput.value = ''; // Clear the link if no region is selected
    }
  }

  // Function to generate Member App link
  function generateMemberAppLink() {
    const chapterName = chapterNameInput.value.trim();
    const selectedRegion = regionSelect.options[regionSelect.selectedIndex];
    
    if (selectedRegion) {
      const regionName = selectedRegion.textContent;
      const firstLetterOfRegion = regionName.charAt(0).toLowerCase(); // Get the first letter of the region name
      const formattedChapterName = chapterName.replace(/\s+/g, '-'); 
      memberAppLinkInput.value = `https://www.bniindia.li/${formattedChapterName}-del-${firstLetterOfRegion}-ma`;
    } else {
      memberAppLinkInput.value = ''; // Clear the link if no region is selected
    }
  }

  // Event listeners for input changes
  chapterNameInput.addEventListener('input', function() {
    generateEoiLink();
    generateMemberAppLink();
  });

  regionSelect.addEventListener('change', function() {
    generateEoiLink();
    generateMemberAppLink();

    const selectedRegionId = this.value;
    const hotelSelect = document.getElementById('hotel_id');
    chapterMeetingDaySelect.innerHTML = '<option value="">Select</option>';  
    chapterStatusSelect.innerHTML = '<option value="">Select</option>';      
    chapterTypeSelect.innerHTML = '<option value="">Select</option>';        
    hotelSelect.innerHTML = '<option value="">Select</option>';  // Clear hotel options

    if (selectedRegionId) {
        // Find the selected region in the stored regionsData
        const selectedRegion = regionsData.find(region => region.region_id == selectedRegionId);

        if (selectedRegion) {
            // Populate the Chapter Meeting Day dropdown
            const daysOfChapter = selectedRegion.days_of_chapter;
            if (Array.isArray(daysOfChapter) && daysOfChapter.length > 0) {
                daysOfChapter.forEach(day => {
                    const option = document.createElement('option');
                    option.value = day;
                    option.textContent = day;
                    chapterMeetingDaySelect.appendChild(option);
                });
            } else {
                console.warn('No days_of_chapter found or it is not an array');
            }

            // Populate the Chapter Status dropdown
            const chapterStatusString = selectedRegion.chapter_status;
            if (chapterStatusString) {
                const chapterStatusArray = chapterStatusString.replace(/[{}]/g, '').split(',');
                if (Array.isArray(chapterStatusArray) && chapterStatusArray.length > 0) {
                    chapterStatusArray.forEach(status => {
                        const option = document.createElement('option');
                        option.value = status.trim();
                        option.textContent = status.trim();
                        chapterStatusSelect.appendChild(option);
                    });
                }
            }

            // Populate the Chapter Type dropdown
            const chapterType = selectedRegion.chapter_type;
            if (Array.isArray(chapterType) && chapterType.length > 0) {
                chapterType.forEach(type => {
                    const option = document.createElement('option');
                    option.value = type;
                    option.textContent = type;
                    chapterTypeSelect.appendChild(option);
                });
            }

            // Populate Hotels dropdown based on region's hotel_ids
            if (selectedRegion.hotel_id && Array.isArray(selectedRegion.hotel_id)) {
                console.log('ðŸ¨ Region Hotels IDs:', selectedRegion.hotel_id);

                fetch('http://localhost:5000/api/getHotels')
                    .then(response => response.json())
                    .then(hotels => {
                        console.log('ðŸ“¥ All Hotels:', hotels);
                        
                        // Filter hotels based on region's hotel_id array
                        const regionHotels = hotels.filter(hotel => 
                            selectedRegion.hotel_id.includes(hotel.hotel_id)
                        );
                        
                        console.log('ðŸ¨ Filtered Hotels for Region:', regionHotels);

                        // Populate hotel dropdown
                        regionHotels.forEach(hotel => {
                            const option = document.createElement('option');
                            option.value = hotel.hotel_id;
                            option.textContent = hotel.hotel_name;
                            hotelSelect.appendChild(option);
                        });
                    })
                    .catch(error => {
                        console.error('âŒ Error fetching hotels:', error);
                    });
            }

            // Set the fees
            oneTimeRegistrationFeeInput.value = selectedRegion.one_time_registration_fee || '';
            chapterLateFeesInput.value = selectedRegion.late_fees || '';
            chapterMembershipFeeInput.value = selectedRegion.one_year_fee || '';
            chapterMembershipFeeTwoYearInput.value = selectedRegion.two_year_fee || '';
            chapterMembershipFeeFiveYearInput.value = selectedRegion.five_year_fee || '';
        }
    }
  });

  // Listen for region selection changes for accolades
  regionSelect.addEventListener('change', function() {
    const selectedOption = this.options[this.selectedIndex];
    const accoladesConfig = selectedOption.dataset.accolades;

    const accoladesContainer = document.getElementById('accolades-container');
    const accoladesList = document.getElementById('accolades-list');

    if (accoladesConfig && accoladesConfig !== '[]') {
      const accolades = JSON.parse(accoladesConfig);
      accoladesContainer.style.display = 'block';
      accoladesList.innerHTML = '';

      // Populate the accolade checkboxes
      accolades.forEach(accoladeId => {
        const accoladeDiv = document.createElement('div');
        accoladeDiv.style.marginBottom = '5px';

        const accoladeCheckbox = document.createElement('input');
        accoladeCheckbox.type = 'checkbox';
        accoladeCheckbox.checked = true;  // Checked by default
        accoladeCheckbox.disabled = true;  // Non-editable
        accoladeCheckbox.id = 'accolade-' + accoladeId;

        const accoladeLabel = document.createElement('label');
        accoladeLabel.htmlFor = 'accolade-' + accoladeId;
        accoladeLabel.textContent = accoladesMap[accoladeId] || `Accolade ${accoladeId}`;

        accoladeDiv.appendChild(accoladeCheckbox);
        accoladeDiv.appendChild(accoladeLabel);
        accoladesList.appendChild(accoladeDiv);
      });
    } else {
      accoladesContainer.style.display = 'none';
    }
  });
});

      </script>
      

<script>
  function updateTaxOptions(modalId) {
    const taxTypeSelect = document.getElementById(`taxType${modalId}`);
    const taxOptionsSelect = document.getElementById(`taxOptions${modalId}`);
    const addButtonContainer = document.getElementById(
      `addButtonContainer${modalId}`
    );
    const addButton = document.getElementById(`addButton${modalId}`);

    // Clear previous options
    taxOptionsSelect.innerHTML =
      '<option value="" selected>Select Percentage</option>';

    if (taxTypeSelect.value === "gst") {
      taxOptionsSelect.innerHTML +=
        '<option value="5">5%</option><option value="12">12%</option><option value="18">18%</option>';
    } else if (taxTypeSelect.value === "vat") {
      taxOptionsSelect.innerHTML +=
        '<option value="5">5%</option><option value="15">15%</option>';
    }

    // Enable the tax options dropdown
    taxOptionsSelect.disabled = false;

    // Show the Add button only if both dropdowns have a selected value
    addButtonContainer.style.display =
      taxTypeSelect.value && taxOptionsSelect.value ? "block" : "none";

    // Event listener for taxOptions dropdown to show/hide Add button
    taxOptionsSelect.addEventListener("change", function () {
      addButtonContainer.style.display =
        taxTypeSelect.value && taxOptionsSelect.value ? "block" : "none";
    });
  }

  // Bootstrap JS
</script>

<script>
  // Handle the "Add Location Note" button click event
  document.getElementById('chapter_location_note').addEventListener('click', function() {
    // Create a new div to hold the textarea and buttons
    const noteDiv = document.createElement('div');
    noteDiv.className = 'd-flex align-items-center mb-2';

    // Create the textarea input
    const textArea = document.createElement('textarea');
    textArea.className = 'form-control me-2';
    textArea.placeholder = 'Enter location note...';
    textArea.rows = 3;

    // Create the tick button (save button)
    const saveButton = document.createElement('button');
    saveButton.className = 'btn btn-success btn-sm me-2';
    saveButton.innerHTML = 'âœ”'; // Tick icon

    // Create the cancel button (X button)
    const cancelButton = document.createElement('button');
    cancelButton.className = 'btn btn-danger btn-sm';
    cancelButton.innerHTML = 'âœ–'; // X icon

    // Append textarea and buttons to the noteDiv
    noteDiv.appendChild(textArea);
    noteDiv.appendChild(saveButton);
    noteDiv.appendChild(cancelButton);

    // Append the noteDiv to the container
    document.getElementById('locationNoteContainer').appendChild(noteDiv);

    // Handle the save (tick) button functionality
    saveButton.addEventListener('click', function() {
      // Handle the logic to save the note (e.g., send the note value to the database)
      const noteValue = textArea.value;
      alert('Location Note Saved: ' + noteValue);
      // You can replace the alert with your actual database-saving logic.
    });

    // Handle the cancel (X) button functionality
    cancelButton.addEventListener('click', function() {
      // Remove the noteDiv when the cancel button is clicked
      noteDiv.remove();
    });
  });
</script>

<script>
  document.getElementById("addChapterForm").addEventListener("submit", async function (event) {
    event.preventDefault();
    
    console.log('âœ… All validations passed');
    console.log('ðŸ“¤ Preparing form data for server...');

    try {
        // Create FormData object
        const formData = new FormData(document.getElementById('addChapterForm'));
        
        // Get the selected hotel ID
        const selectedHotelId = document.getElementById('hotel_id').value;
        formData.append('hotel_id', selectedHotelId);

        // Log FormData before sending
        console.log('ðŸ“¦ Form Data Being Sent:');
        for (let pair of formData.entries()) {
            console.log(pair[0] + ': ' + pair[1]);
        }
        
        console.log('ðŸš€ Sending data to server...');

        const response = await fetch('http://localhost:5000/api/chapters', {
            method: 'POST',
            body: formData
        });

        const result = await response.json();
        
        if (response.ok) {
            const chapterData = result.data;
            console.log('\nâœ¨ API Response Data âœ¨');
            console.log('====================');
            
            // Basic Info
            console.group('ðŸ“Œ Basic Information');
            console.log('Chapter ID:', chapterData.chapter_id);
            console.log('Chapter Name:', chapterData.chapter_name);
            console.log('Region ID:', chapterData.region_id);
            console.log('Hotel ID:', chapterData.hotel_id);
            console.groupEnd();

            // Meeting Details
            console.group('ðŸ—“ï¸ Meeting Details');
            console.log('Meeting Day:', chapterData.chapter_meeting_day);
            console.log('Chapter Status:', chapterData.chapter_status);
            console.log('Chapter Type:', chapterData.chapter_type);
            console.groupEnd();

            // Fees
            console.group('ðŸ’° Fees');
            console.log('Registration Fee:', chapterData.one_time_registration_fee);
            console.log('Late Fee:', chapterData.chapter_late_fees);
            console.log('Membership (1 Year):', chapterData.chapter_membership_fee);
            console.log('Membership (2 Year):', chapterData.chapter_membership_fee_two_year);
            console.log('Membership (5 Year):', chapterData.chapter_membership_fee_five_year);
            console.groupEnd();

            // Location
            console.group('ðŸ“ Location');
            console.log('Country:', chapterData.country);
            console.log('State:', chapterData.state);
            console.log('City:', chapterData.city);
            console.log('Address 1:', chapterData.street_address_line_1);
            console.log('Address 2:', chapterData.street_address_line_2);
            console.log('Postal Code:', chapterData.postal_code);
            console.groupEnd();

            // Links
            console.group('ðŸ”— Links');
            console.log('EOI Link:', chapterData.eoi_link);
            console.log('Member App Link:', chapterData.member_app_link);
            console.log('Website:', chapterData.website_link);
            console.groupEnd();

            // Social Media
            console.group('ðŸŒ Social Media');
            console.log('Facebook:', chapterData.social_facebook);
            console.log('Instagram:', chapterData.social_instagram);
            console.log('LinkedIn:', chapterData.social_linkedin);
            console.log('YouTube:', chapterData.social_youtube);
            console.groupEnd();

            // Additional Info
            console.group('â„¹ï¸ Additional Info');
            console.log('Publishing Date:', chapterData.date_of_publishing);
            console.log('Launched By:', chapterData.chapter_launched_by);
            if (chapterData.chapter_logo_url) {
                console.log('Logo URL:', chapterData.chapter_logo_url);
            }
            console.groupEnd();

            toastr.success('Chapter added successfully!');
            setTimeout(() => {
                window.location.href = '/c/manage-chapter';
            }, 1200);
        } else {
            console.error('âŒ Error:', result.message);
            toastr.error(result.message || 'Error adding chapter');
        }
    } catch (error) {
        console.error('âŒ Error:', error);
        toastr.error('An error occurred. Please try again.');
    }
  });
</script>
  <script src="../../assets/js/country.js"></script>

<%- include('../partials/footer') %> 
    
  

<script>
document.getElementById('contact_number').addEventListener('blur', function() {
    // Remove any non-digits
    let contactNumber = this.value.replace(/\D/g, '');
    console.log('ðŸ“ž Validating number:', contactNumber);

    // Show error only when user leaves the input field
    if (contactNumber.length !== 10 && contactNumber.length > 0) {
        console.warn('âš ï¸ Invalid number length:', contactNumber.length + ' digits');
        toastr.error('Contact number must be exactly 10 digits');
    } else if (contactNumber.length === 10) {
        console.log('âœ… Valid number:', contactNumber);
    }

    // Update input value with cleaned number
    this.value = contactNumber;
});

// Prevent + and e in number input
document.getElementById('contact_number').addEventListener('keypress', function(e) {
    if (e.key === '+' || e.key === 'e' || e.key === 'E' || e.key === '-') {
        e.preventDefault();
    }
});
</script>
  
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.getElementById("addHotelButton").addEventListener("click", function() {
    const selectedRegionId = document.getElementById('region_id').value;

    if (!selectedRegionId) {
        Swal.fire('Error', 'Please select a region first.', 'error');
        return;
    }

    Swal.fire({
        title: 'Add Hotel',
        html: `
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <label for="hotel_name" style="font-weight: bold; width: 150px;">Hotel Name</label>
                    <input type="text" id="hotel_name" class="swal2-input" placeholder="Hotel Name" required>
                </div>

                <div style="display: flex; align-items: center; gap: 10px;">
                    <label for="hotel_address" style="font-weight: bold; width: 150px;">Hotel Address</label>
                    <input type="text" id="hotel_address" class="swal2-input" placeholder="Hotel Address">
                </div>

                <div style="display: flex; align-items: center; gap: 10px;">
                    <label for="hotel_pincode" style="font-weight: bold; width: 150px;">Hotel Pincode</label>
                    <input type="text" id="hotel_pincode" class="swal2-input" placeholder="Pincode">
                </div>

                <div style="display: flex; align-items: center; gap: 10px;">
                    <label for="hotel_bill_amount" style="font-weight: bold; width: 150px;">Hotel Bill Amount</label>
                    <input type="text" id="hotel_bill_amount" class="swal2-input" placeholder="Bill Amount">
                </div>

                <div style="display: flex; align-items: center; gap: 10px;">
                    <label for="hotel_published_by" style="font-weight: bold; width: 150px;">Hotel Published By</label>
                    <input type="text" id="hotel_published_by" class="swal2-input" placeholder="Published By">
                </div>

                <div style="display: flex; align-items: center; gap: 10px;">
                    <label for="hotel_phone" style="font-weight: bold; width: 150px;">Hotel Number</label>
                    <input type="tel" id="hotel_phone" class="swal2-input" placeholder="Phone" required>
                </div>

                <div style="display: flex; align-items: center; gap: 10px;">
                    <label for="hotel_email" style="font-weight: bold; width: 150px;">Hotel Email ID</label>
                    <input type="email" id="hotel_email" class="swal2-input" placeholder="Email" required>
                </div>

                <div style="display: flex; align-items: center; gap: 10px;">
                    <label for="date_of_publishing" style="font-weight: bold; width: 150px;">Publishing Date</label>
                    <input type="date" id="date_of_publishing" class="swal2-input" placeholder="Publishing Date">
                </div>

                <div style="display: flex; align-items: center; gap: 10px;">
                    <label for="hotel_status" style="font-weight: bold; width: 150px;">Hotel Status</label>
                    <select id="hotel_status" class="swal2-input">
                        <option value="true">Active</option>
                        <option value="false">Inactive</option>
                    </select>
                </div>
            </div>
        `,
        focusConfirm: false,
        preConfirm: () => {
            const hotelName = document.getElementById('hotel_name').value.trim();
            const hotelEmail = document.getElementById('hotel_email').value.trim();
            const hotelPhone = document.getElementById('hotel_phone').value.trim();

            if (!hotelName || !hotelEmail || !hotelPhone) {
                Swal.showValidationMessage('Please fill all required fields');
                return false;
            }

            return fetch('http://localhost:5000/api/addHotelToRegion', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    hotel_name: hotelName,
                    hotel_address: document.getElementById('hotel_address').value.trim(),
                    hotel_bill_amount: document.getElementById('hotel_bill_amount').value.trim(),
                    hotel_pincode: document.getElementById('hotel_pincode').value.trim(),
                    hotel_status: document.getElementById('hotel_status').value === 'true',
                    hotel_published_by: document.getElementById('hotel_published_by').value.trim(),
                    hotel_email: hotelEmail,
                    hotel_phone: hotelPhone,
                    date_of_publishing: document.getElementById('date_of_publishing').value || new Date().toISOString().split("T")[0],
                    region_id: selectedRegionId // Associate the hotel with the selected region
                })
            }).then(response => {
                if (!response.ok) {
                    throw new Error(response.statusText);
                }
                return response.json();
            }).catch(error => {
                Swal.showValidationMessage(`Request failed: ${error}`);
            });
        }
    }).then((result) => {
        if (result.isConfirmed) {
            Swal.fire('Success!', 'Hotel added successfully!', 'success');

            fetchAndDisplayHotels(); // Refresh the hotel list
            window.location.reload();
        }
    });
});

// Function to fetch and display hotels
function fetchAndDisplayHotels() {
    const selectedRegionId = document.getElementById('region_id').value;

    fetch("http://localhost:5000/api/getHotels")
        .then((response) => response.json())
        .then((data) => {
            const hotelsContainer = document.getElementById("hotelsContainer");

            // Clear existing content (if any)
            hotelsContainer.innerHTML = `
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="selectAllHotels" />
                    <label class="form-check-label" for="selectAllHotels">Select All</label>
                </div>
            `;

            // Filter hotels based on the selected region_id
            const regionHotels = data.filter(hotel => hotel.region_id == selectedRegionId);

            // Loop through hotels and create checkboxes
            regionHotels.forEach((hotel) => {
                const checkboxDiv = document.createElement("div");
                checkboxDiv.className = "form-check";

                const checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.className = "form-check-input";
                checkbox.id = `hotel${hotel.hotel_id}`;
                checkbox.name = "hotels[]";  // Use array syntax for multiple selections
                checkbox.value = hotel.hotel_id;

                const label = document.createElement("label");
                label.className = "form-check-label";
                label.setAttribute("for", `hotel${hotel.hotel_id}`);
                label.textContent = hotel.hotel_name;

                // Append checkbox and label to the div
                checkboxDiv.appendChild(checkbox);
                checkboxDiv.appendChild(label);

                // Append the div to the hotels container
                hotelsContainer.appendChild(checkboxDiv);
            });

            // Add event listener for "Select All" checkbox
            document.getElementById('selectAllHotels').addEventListener('change', function() {
                const checkboxes = document.querySelectorAll('#hotelsContainer .form-check-input:not(#selectAllHotels)');
                checkboxes.forEach(checkbox => {
                    checkbox.checked = this.checked;
                });
            });
        })
        .catch((error) => console.error("Error fetching hotels:", error));
}

// Call fetchAndDisplayHotels on page load
document.addEventListener("DOMContentLoaded", fetchAndDisplayHotels);
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
      const checkbox = document.getElementById('showEmergencyContact');
      const emergencySection = document.getElementById('chapterEmailSection');
  
      checkbox.addEventListener('change', function() {
          if (this.checked) {
              emergencySection.style.display = 'block';
              setTimeout(() => {
                  emergencySection.style.opacity = '1';
              }, 50);
          } else {
              emergencySection.style.opacity = '0';
              setTimeout(() => {
                  emergencySection.style.display = 'none';
              }, 300);
          }
      });
  });
  </script> 
  
